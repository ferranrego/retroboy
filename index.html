<!doctype html><html lang="en"><head><meta charset="utf-8"/><link rel="icon" href="/retroboy/favicon.ico"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="theme-color" content="#000000"/><meta name="description" content="Web site created using create-react-app"/><link rel="apple-touch-icon" href="/retroboy/logo192.png"/><link rel="manifest" href="/retroboy/manifest.json"/><title>Retro Boy</title><script defer="defer" src="/retroboy/static/js/main.924a52ff.js"></script></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"></div><script type="module">
  // Load the Farcaster Frames SDK from a CDN.
  import { sdk } from 'https://esm.sh/@farcaster/frame-sdk';
  // When the window has loaded, signal that your app is ready.
  window.addEventListener('load', async () => {
    console.log("App loaded: calling sdk.actions.ready()");
    await sdk.actions.ready();
  });
</script>
<script>
  // Wait for the page (and hopefully the emulator) to fully load.
  window.addEventListener('load', function() {
    // A short delay to help ensure all scripts and elements are ready.
    setTimeout(async function() {
      console.log("Attempting to load default ROM...");
      try {
        // Fetch the ROM file.
        const response = await fetch('https://ferranrego.github.io/retroboy/roms/default.gb');
        if (!response.ok) {
          throw new Error("Network response was not ok: " + response.status);
        }
        const buffer = await response.arrayBuffer();
        const romData = new Uint8Array(buffer);
        
        // Try method 1: Check if a global 'retroboy' object with a loadROM method exists.
        if (window.retroboy && typeof window.retroboy.loadROM === 'function') {
          window.retroboy.loadROM(romData);
          console.log("Default ROM loaded via retroboy.loadROM()");
          return;
        }
        
        // Try method 2: Check for an 'emulator' global object with a loadROM function.
        if (window.emulator && typeof window.emulator.loadROM === 'function') {
          window.emulator.loadROM(romData);
          console.log("Default ROM loaded via emulator.loadROM()");
          return;
        }
        
        // Try method 3: If there’s a file input element for ROM loading, simulate a file selection.
        var fileInput = document.querySelector('input[type="file"]');
        if (fileInput) {
          // Create a Blob and then a File from the ROM data.
          const blob = new Blob([romData], { type: "application/octet-stream" });
          const file = new File([blob], "default.gb", { type: "application/octet-stream" });
          // Create a DataTransfer to mimic a user selecting the file.
          const dataTransfer = new DataTransfer();
          dataTransfer.items.add(file);
          fileInput.files = dataTransfer.files;
          // Dispatch a change event to trigger the ROM load.
          var event = new Event('change', { bubbles: true });
          fileInput.dispatchEvent(event);
          console.log("Default ROM loaded by simulating file input change event.");
          return;
        }
        
        console.error("No known method to load ROM found: neither retroboy.loadROM, emulator.loadROM, nor a file input element exists.");
      } catch (error) {
        console.error("Error loading default ROM:", error);
      }
    }, 500); // 500ms delay (adjust if necessary)
  });
</script>
<script>
  window.addEventListener('load', function() {
    // 1) Hide the instructions text (the paragraph that starts "Retro Boy is a Game Boy emulator...")
    let instructions = [...document.querySelectorAll("p")].find(
      p => p.innerText && p.innerText.includes("Retro Boy is a Game Boy emulator")
    );
    if (instructions) {
      instructions.style.display = "none";
    }

    // 2) Hide the "Load ROM" button
    let loadRomButton = [...document.querySelectorAll("button")].find(
      b => b.innerText.trim().toLowerCase() === "load rom"
    );
    if (loadRomButton) {
      loadRomButton.style.display = "none";
    }

    // 3) Hide the "CONTROLS" button
    let controlsButton = [...document.querySelectorAll("button")].find(
      b => b.innerText.trim().toLowerCase() === "controls"
    );
    if (controlsButton) {
      controlsButton.style.display = "none";
    }

    // 4) Hide the "CHEATS" button
    let cheatsButton = [...document.querySelectorAll("button")].find(
      b => b.innerText.trim().toLowerCase() === "cheats"
    );
    if (cheatsButton) {
      cheatsButton.style.display = "none";
    }

    // 5) Force COLOR mode by clicking the "COLOR" button
    let colorButton = [...document.querySelectorAll("button")].find(
      b => b.innerText.trim().toLowerCase() === "color"
    );
    if (colorButton) {
      colorButton.click();
      console.log("Switched to COLOR mode by default.");
    } else {
      console.warn("COLOR button not found; cannot auto‐select color mode.");
    }
  });
</script>


</body></html>
